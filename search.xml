<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title></title>
    <url>%2F2018%2F06%2F19%2FPM2%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[PM2介绍&emsp;&emsp;PM2 is a process manager for the JavaScript runtime Node.js. In 2016, PM2 is ranked as the 82nd most popular JavaScript project on GitHub.&emsp;&emsp;PM2 or Process Manager 2, is an Open Source, production Node.js process manager helping Developers and Devops manage Node.js applications in production environment. In comparison with other process manager like Supervisord, Forever, Systemd, some key features of PM2 are automatic application load balancing, declarative application configuration, deployment system and monitoring.&emsp;&emsp;Started in 2013 by Alexandre Strzelewicz. The code source is hosted on GitHub and installable via Npm (software) “Npm (software)”).说明：本次安装环境为CentOS7上进行 PM2安装1.安装node首先，从Node.js官网下载对应平台的安装程序，网速慢的童鞋请移步国内镜像。 [root@www ~]# tar xf node-v10.3.0-linux-x64.tar.gz [root@www ~]# cd node-v10.3.0-linux-x64/ [root@www node-v10.3.0-linux-x64]# ls bin CHANGELOG.md include lib LICENSE README.md share [root@www node-v10.3.0-linux-x64]# 加入环境变量中： [root@www node-v10.3.0-linux-x64]# echo &quot;export PATH=/usr/local/node-v10.3.0-linux-x64/bin:$PATH&quot; &gt; /etc/profile.d/nodejs.sh [root@www node-v10.3.0-linux-x64]# source /etc/profile [root@www node-v10.3.0-linux-x64]# npm -v 6.1.0 [root@www node-v10.3.0-linux-x64]# 2.安装pm2通过上面node提供的npm进行安装 [root@www ~]# npm install pm2 -g 如图提示说明安装成功 PM2使用start [options] &lt;file|json|stdin|app_name|pm_id...&gt; 后台启动node.js应用 trigger &lt;proc_name&gt; &lt;action_name&gt; [params] 通过此命令触发操作流程？？ deploy &lt;file|environment&gt; 通过环境变量或配置文件发布node.js项目 startOrRestart &lt;json&gt; start or restart JSON file startOrReload &lt;json&gt; start or gracefully reload JSON file pid [app_name] 返回指定app的pid或返回所有的pid startOrGracefulReload &lt;json&gt; start or gracefully reload JSON file stop [options] &lt;id|name|all|json|stdin...&gt; 停止一个进程 (若要重新启动, 执行pm2 restart &lt;app&gt;) restart [options] &lt;id|name|all|json|stdin...&gt; 重启一个进程 scale &lt;app_name&gt; &lt;number&gt; 在集群模式中依赖总数增加或减少集群数量 snapshot snapshot PM2 memory profile &lt;command&gt; CPU的使用情况 reload &lt;name|all&gt; 重新加载进程 (注意这个只针对http/https的应用) gracefulReload &lt;name|all&gt; 优雅地重新加载一个进程. 发送&quot;shutdown&quot; 关闭所有的连接. id &lt;name&gt; 获取app的id delete &lt;name|id|script|all|json|stdin...&gt; 停止次进程并且冲pm2管理列表中删除此进程 sendSignal &lt;signal&gt; &lt;pm2_id|name&gt; 向目标进程发送一个系统signal ping ping pm2的后台进程 - 如果挂了 就重启 updatePM2 使用内存中的PM2更新内存中的 update updatePM2的别名 install|module:install [options] [module|git:/] 安装或者更新模块 (或者是模块的设置) 然后永久运行它 module:update &lt;module|git:/&gt; 更新模块并永久运行 module:generate [app_name] 在当前目录生成一个事例模块 uninstall|module:uninstall &lt;module&gt; 停止并卸载一个模块 publish|module:publish Publish the module you are currently on set [key] [value] sets the specified config &lt;key&gt; &lt;value&gt; multiset &lt;value&gt; multiset eg &quot;key1 val1 key2 val2 get [key] get value for &lt;key&gt; conf [key] [value] get / set module config values config &lt;key&gt; [value] get / set module config values unset &lt;key&gt; clears the specified config &lt;key&gt; report give a full pm2 report for https://github.com/Unitech/pm2/issues link|interact [options] [secret] [public] [name] linking action to keymetrics.io - command can be stop|info|delete|restart unlink linking action to keymetrics.io - command can be stop|info|delete|restart unmonitor [name] unmonitor target process monitor [name] monitor target process open open dashboard in browser register create an account on keymetrics login login to keymetrics and link current PM2 web launch a health API on 0.0.0.0:9615 dump|save dump all processes for resurrecting them later send &lt;pm_id&gt; &lt;line&gt; send stdin to &lt;pm_id&gt; attach &lt;pm_id&gt; [comman] attach stdin/stdout to application identified by &lt;pm_id&gt; resurrect resurrect previously dumped processes unstartup [platform] disable and clear auto startup - [platform]=systemd,upstart,launchd,rcd startup [platform] setup script for pm2 at boot - [platform]=systemd,upstart,launchd,rcd logrotate copy default logrotate configuration ecosystem|init [mode] generate a process conf file. (mode = null or simple) reset &lt;name|id|all&gt; reset counters for process describe &lt;id&gt; describe all parameters of a process id desc &lt;id&gt; (alias) describe all parameters of a process id info &lt;id&gt; (alias) describe all parameters of a process id show &lt;id&gt; (alias) describe all parameters of a process id list|ls list all processes l (alias) list all processes ps (alias) list all processes status (alias) list all processes jlist list all processes in JSON format prettylist print json in a prettified JSON monit launch termcaps monitoring imonit launch legacy termcaps monitoring dashboard|dash launch dashboard with monitoring and logs flush flush logs reloadLogs reload all logs logs [options] [id|name] stream logs file. Default stream all logs kill kill daemon pull &lt;name&gt; [commit_id] updates repository for a given app forward &lt;name&gt; updates repository to the next commit for a given app backward &lt;name&gt; downgrades repository to the previous commit for a given app gc force PM2 to trigger garbage collection deepUpdate performs a deep update of PM2 serve|expose [path] [port] serve a directory over http via port]]></content>
  </entry>
  <entry>
    <title><![CDATA[first]]></title>
    <url>%2F2018%2F06%2F08%2Ffirst%2F</url>
    <content type="text"><![CDATA[HOMEdirectorymall GITLAB 机器列表及应用 设备名 | 公用IP | 专用IP | 模块 | 类型说明 | 应用 —|—|—|—|—|— svn-demo.shein.com | 50.23.190.55 | 10.28.140.100 | 代码构建归档 | 中间件 迁移说明 提前迁移:是 项目结构图或说明 3. 新机房配置要求 机器用途 | 数量 | 配置 ---|---|--- Gitlab主 | 1 | 4C16G500G Gitlib备 | 1 | 4C16G500G 迁移前准备工作 搭建Gitlab服务器； 验证新旧机器上版本的gitlab数据格式是否兼容（若版本一致，则忽略此步骤）； 确定时间窗口，停用发布系统； 确定时间窗口，停用旧gitlab服务，禁止提交修改代码； gitlab数据库中的url可能需要修改； 迁移步骤 关闭旧机器上的gitlab备份定时任务； 手动备份旧机器上的gitlab数据； 将第2步中备份的tar文件拷贝到新机器上对应的gitlab备份目录中，yum安装/var/opt/gitlab/backups; 登录新gitlab机器，恢复数据； 验证新机器上gitlab服务正常及代码完整； 若上一步正常，则将发布系统中的git库地址修改为新库地址； 配置并启动gitlab备份定时任务； 迁移注意事项及风险 风险 新旧gitlab服务器上代码不一致； 发布系统执行发布代码操作失败导致线上业务故障； 注意事项 备份之前，确定时间窗口，禁止push代码； 方法一：通知研发在指定时间段不要推送代码到旧gitlab； 方法二：直接关闭旧gitlab对外的URL； 迁移过程中，禁止使用发布系统； 研发人员后面改用域名访问； 正式迁移工作量说明：按天计算，最低0.5天，并做简单说明 迁移阶段 | 具体任务 | 天数 | 负责人 | 备注 —|—|—|—|— 迁移之前 | 搭建gitlab服务器 | 0.5 迁移过程 | 迁移数据并恢复 | 0.5 迁移之后 | 1.验证gitlab可用；2.修改发布系统的git库链接； 3.配置并启动gitlab日常备份定时任务； | 1]]></content>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F06%2F08%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
